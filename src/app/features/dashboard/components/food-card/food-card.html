<mat-card class="results-card" *ngIf="nutritionData">
  <mat-card-header>
    <mat-card-title class="food-title">
      <span class="food-icon">ğŸ½ï¸</span>
      {{ nutritionData.food_name }}
    </mat-card-title>
    <mat-card-subtitle>{{ nutritionData.food_category }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- Confidence Score -->
    <div class="confidence-section">
      <div class="confidence-icon">ğŸ¯</div>
      <div class="confidence-label">Confidence Score</div>
      <mat-progress-bar mode="determinate" [value]="nutritionData.confidence_score" [color]="getConfidenceColor()">
      </mat-progress-bar>
      <span class="confidence-value">{{ nutritionData.confidence_score }}%</span>
    </div>

    <!-- Basic Info -->
    <div class="info-grid">
      <div class="info-item">
        <span class="info-icon">ğŸ”¥</span>
        <div>
          <div class="info-value">{{ nutritionData.calories_per_serving }}</div>
          <div class="info-label">Calories</div>
        </div>
      </div>
      <div class="info-item">
        <span class="info-icon">ğŸ“</span>
        <div>
          <div class="info-value">{{ nutritionData.serving_size }}</div>
          <div class="info-label">Serving Size</div>
        </div>
      </div>
      <div class="info-item">
        <span class="info-icon">â¤ï¸</span>
        <div>
          <div class="info-value">{{ nutritionData.healthiness_score }}/10</div>
          <div class="info-label">Health Score</div>
        </div>
      </div>
    </div>

    <!-- Macros -->
    <div class="macros-section">
      <div class="section-header">
        <span class="section-icon">ğŸ§¬</span>
        <h3>Macronutrients</h3>
      </div>
      <div class="macros-grid">
        <div class="macro-item">
          <div class="macro-icon">ğŸ’ª</div>
          <div class="macro-value">{{ nutritionData.macros.protein }}g</div>
          <div class="macro-label">Protein</div>
        </div>
        <div class="macro-item">
          <div class="macro-icon">ğŸŒ¾</div>
          <div class="macro-value">{{ nutritionData.macros.carbs }}g</div>
          <div class="macro-label">Carbs</div>
        </div>
        <div class="macro-item">
          <div class="macro-icon">ğŸ¥‘</div>
          <div class="macro-value">{{ nutritionData.macros.fat }}g</div>
          <div class="macro-label">Fat</div>
        </div>
        <div class="macro-item">
          <div class="macro-icon">ğŸŒ¿</div>
          <div class="macro-value">{{ nutritionData.macros.fiber }}g</div>
          <div class="macro-label">Fiber</div>
        </div>
        <div class="macro-item">
          <div class="macro-icon">ğŸ¯</div>
          <div class="macro-value">{{ nutritionData.macros.sugar }}g</div>
          <div class="macro-label">Sugar</div>
        </div>
      </div>
    </div>

    <!-- Serving Size Adjustment -->
    <div class="serving-adjustment">
      <div class="section-header">
        <span class="section-icon">âš–ï¸</span>
        <h3>Adjust Serving Size</h3>
      </div>
      <mat-form-field appearance="outline" class="serving-input">
        <mat-label>Serving Size</mat-label>
        <input matInput type="text" [(ngModel)]="servingMultiplier" min="0.1" step="0.1">
      </mat-form-field>
      <button mat-raised-button color="primary" (click)="generateCorrectedValues()">
        <span class="btn-icon">ğŸ§®</span>
        {{ generating ? 'Calculating...' : 'Get Corrected Values' }}
      </button>
    </div>

    <!-- Corrected Values -->
<div class="corrected-section" *ngIf="correctedData">
  <div class="section-header">
    <span class="section-icon">âœ…</span>
    <h3>Reevaluated Nutritional Values</h3>
  </div>
  <div class="corrected-grid">
    <div class="corrected-item">
      <span class="corrected-icon">ğŸ”¥</span>
      <div>
        <div class="corrected-value">{{ correctedData.corrected_calories }}</div>
        <div class="corrected-label">Calories</div>
      </div>
    </div>
    <div class="corrected-item">
      <span class="corrected-icon">ğŸ“</span>
      <div>
        <div class="corrected-value">{{ correctedData.corrected_serving_size }}</div>
        <div class="corrected-label">Serving Size</div>
      </div>
    </div>
  </div>

  <div class="corrected-macros">
    <div class="subsection-header">
      <span class="subsection-icon">ğŸ”„</span>
      <h4>Reevaluated Macros</h4>
    </div>
    <div class="macros-grid">
      <div class="macro-item">
        <div class="macro-icon">ğŸ’ª</div>
        <div class="macro-value">{{ correctedData.corrected_macros.protein }}g</div>
        <div class="macro-label">Protein</div>
      </div>
      <div class="macro-item">
        <div class="macro-icon">ğŸŒ¾</div>
        <div class="macro-value">{{ correctedData.corrected_macros.carbs }}g</div>
        <div class="macro-label">Carbs</div>
      </div>
      <div class="macro-item">
        <div class="macro-icon">ğŸ¥‘</div>
        <div class="macro-value">{{ correctedData.corrected_macros.fat }}g</div>
        <div class="macro-label">Fat</div>
      </div>
      <div class="macro-item">
        <div class="macro-icon">ğŸŒ¿</div>
        <div class="macro-value">{{ correctedData.corrected_macros.fiber }}g</div>
        <div class="macro-label">Fiber</div>
      </div>
      <div class="macro-item">
        <div class="macro-icon">ğŸ¯</div>
        <div class="macro-value">{{ correctedData.corrected_macros.sugar }}g</div>
        <div class="macro-label">Sugar</div>
      </div>
    </div>
  </div>

  <!-- Nutritional Advice -->
  <div class="advice-section" *ngIf="correctedData.nutritional_advice">
    <div class="subsection-header">
      <span class="subsection-icon">ğŸ’¡</span>
      <h4>Nutritional Advice</h4>
    </div>
    <p class="advice-text">{{ correctedData.nutritional_advice }}</p>
  </div>

  <!-- Portion Recommendation -->
  <div class="recommendation-section" *ngIf="correctedData.portion_recommendation">
    <div class="subsection-header">
      <span class="subsection-icon">ğŸ“‹</span>
      <h4>Portion Recommendation</h4>
    </div>
    <p class="recommendation-text">{{ correctedData.portion_recommendation }}</p>
  </div>
</div>


    <!-- Healthier Alternatives -->
    <div class="alternatives-section" *ngIf="nutritionData.healthier_alternatives.length > 0">
      <div class="section-header">
        <span class="section-icon">ğŸŒŸ</span>
        <h3>Healthier Alternatives</h3>
      </div>
      <mat-chip-set>
        <mat-chip *ngFor="let alternative of nutritionData.healthier_alternatives">
          <span class="chip-icon">ğŸ¥—</span>
          {{ alternative }}
        </mat-chip>
      </mat-chip-set>
    </div>
  </mat-card-content>

  <mat-card-actions>
    <button mat-stroked-button (click)="startOver()">
      <span class="btn-icon">ğŸ”„</span>
      Analyze Another Food
    </button>
  </mat-card-actions>
</mat-card>
